Create or replace Function UtentePremium() returns Trigger as $AscoltiNoPremium$
DECLARE
	Qualita1 Traccia.Qualita%TYPE;
	IsPremium1 Utente.IsPremium%TYPE;
BEGIN
	raise notice '% %', tg_argv[0], tg_argv[1];
	Select Qualita into Qualita1
	From Traccia
	Where CAST(tg_argv[0] AS INTEGER) = Traccia.CodT;
	
	
	
	Select IsPremium into IsPremium1
	From Utente
	Where TG_argv[1] = Utente.NickName;
	
	raise notice '% %', qualita1, IsPremium1;
	if(Qualita1 > 128 and not IsPremium1) then
		Delete From Ascolta Where Ascolta.CodT = new.CodT;
	end if;
	Return null;
END;
$AscoltiNoPremium$ Language plpgsql;
