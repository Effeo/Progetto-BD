Create or replace Function UtentePremium() returns Trigger as $$
DECLARE
	Qualita1 Traccia.Qualita%TYPE;
	IsPremium1 Utente.IsPremium%TYPE;
BEGIN
	Select Qualita into Qualita1
	From Traccia
	Where new.CodT = Traccia.CodT;
	
	Select IsPremium into IsPremium1
	From Utente
	Where new.NickName = Utente.NickName;
	
	raise notice '% %', qualita1, IsPremium1;
	if(Qualita1 > 128 and not IsPremium1) then
		Delete From Ascolta Where Ascolta.CodT = new.CodT;
	end if;
	Return null;
END;
$$ Language plpgsql;
